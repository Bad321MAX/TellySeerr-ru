# TellySeerr

[![Python Version](https://img.shields.io/badge/python-3.11-blue.svg)](https://www.python.org/downloads/)
[![Linter: Ruff](https://img.shields.io/badge/linter-ruff-brightgreen.svg)](https://github.com/astral-sh/ruff)
[![License: MIT](https://img.shields.io/badge/License-MIT-yellow.svg)](https://opensource.org/licenses/MIT)

–£–¥–æ–±–Ω—ã–π Telegram‚Äë–±–æ—Ç –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–µ—Ä–≤–µ—Ä–∞–º–∏ Jellyfin –∏ Jellyseerr.  
–ü–æ–∑–≤–æ–ª—è–µ—Ç –∞–¥–º–∏–Ω–∞–º –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞—Ç—å –≤—ã–¥–∞—á—É –¥–æ—Å—Ç—É–ø–æ–≤, –∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º ‚Äî –∑–∞–ø—Ä–∞—à–∏–≤–∞—Ç—å —Ñ–∏–ª—å–º—ã/—Å–µ—Ä–∏–∞–ª—ã –∏ —Å–º–æ—Ç—Ä–µ—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –ø—Ä–æ—Å–º–æ—Ç—Ä–æ–≤.

---

## ‚ú® –û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

### üëë –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏ (–∞–¥–º–∏–Ω)

- **–ë—ã—Å—Ç—Ä—ã–µ –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏—è –ø–æ —Ä–µ–ø–ª–∞—é:**
  - `/invite` ‚Äî —Å–æ–∑–¥–∞—Ç—å –ø–æ—Å—Ç–æ—è–Ω–Ω—ã–π –∞–∫–∫–∞—É–Ω—Ç (Jellyfin + Jellyseerr).
  - `/trial` ‚Äî –≤—ã–¥–∞—Ç—å —Ç–µ—Å—Ç–æ–≤—ã–π –¥–æ—Å—Ç—É–ø –Ω–∞ 7 –¥–Ω–µ–π.
  - `/vip` ‚Äî –≤—ã–¥–∞—Ç—å VIP‚Äë–¥–æ—Å—Ç—É–ø –Ω–∞ 30 –¥–Ω–µ–π.
- **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏:**
  - `/deleteuser <username>` ‚Äî —É–¥–∞–ª–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏–∑ Jellyfin, Jellyseerr –∏ –±–∞–∑—ã –±–æ—Ç–∞.
  - `/listusers` ‚Äî –ø–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ Jellyfin.
- **–ê–≤—Ç–æ‚Äë–æ—á–∏—Å—Ç–∫–∞:** —Ñ–æ–Ω–æ–≤–∞—è –∑–∞–¥–∞—á–∞ —Ä–∞–∑ –≤ –¥–µ–Ω—å –Ω–∞—Ö–æ–¥–∏—Ç –∏ —É–¥–∞–ª—è–µ—Ç –ø—Ä–æ—Å—Ä–æ—á–µ–Ω–Ω—ã—Ö trial/VIP –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∏–∑ –≤—Å–µ—Ö —Å–∏—Å—Ç–µ–º.

### üë§ –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –¥–ª—è –æ–±—ã—á–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

- **–°–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–∞—è –ø—Ä–∏–≤—è–∑–∫–∞ –∞–∫–∫–∞—É–Ω—Ç–∞:**  
  `/link <–ª–æ–≥–∏–Ω> <–ø–∞—Ä–æ–ª—å>` ‚Äî –ø—Ä–∏–≤—è–∑–∫–∞ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ –∞–∫–∫–∞—É–Ω—Ç–∞ Jellyfin/Jellyseerr.  
  `/unlink` ‚Äî –æ—Ç–≤—è–∑–∫–∞.
- **–õ–∏—á–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞:**  
  `/watch` ‚Äî –æ–±—â–µ–µ –≤—Ä–µ–º—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞, –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø—Ä–æ—Å–º–æ—Ç—Ä–µ–Ω–Ω—ã—Ö —Ñ–∏–ª—å–º–æ–≤/—Å–µ—Ä–∏–π –∏ –ø–æ—Å–ª–µ–¥–Ω–∏–π –ø—Ä–æ—Å–º–æ—Ç—Ä–µ–Ω–Ω—ã–π —Ç–∞–π—Ç–ª.

### üé¨ –ó–∞–ø—Ä–æ—Å—ã –º–µ–¥–∏–∞ (Jellyseerr + TMDB/TheTVDB)

- **–ü–æ–∏—Å–∫ –∏ –ø–æ–¥–±–æ—Ä:**
  - `/request <–Ω–∞–∑–≤–∞–Ω–∏–µ>` ‚Äî –ø–æ–∏—Å–∫ —Ñ–∏–ª—å–º–æ–≤ –∏ —Å–µ—Ä–∏–∞–ª–æ–≤ —á–µ—Ä–µ–∑ Jellyseerr (TMDB). [web:2]
  - `/series <–Ω–∞–∑–≤–∞–Ω–∏–µ>` ‚Äî –ø–æ–∏—Å–∫ —Å–µ—Ä–∏–∞–ª–æ–≤ –ø–æ —Ä—É—Å—Å–∫–∏–º –Ω–∞–∑–≤–∞–Ω–∏—è–º —á–µ—Ä–µ–∑ TheTVDB —Å –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–π –ø—Ä–∏–≤—è–∑–∫–æ–π –∫ Sonarr –ø–æ TVDB ID. [web:7]
  - `/discover` ‚Äî —Å–ø–∏—Å–æ–∫ –ø–æ–ø—É–ª—è—Ä–Ω—ã—Ö –∏ —Ç—Ä–µ–Ω–¥–æ–≤—ã—Ö —Ñ–∏–ª—å–º–æ–≤/—Å–µ—Ä–∏–∞–ª–æ–≤.
- **–ì–∏–±–∫–∏–µ –∑–∞–ø—Ä–æ—Å—ã:**
  - –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–µ –∫–Ω–æ–ø–∫–∏ ¬´–ù–∞–∑–∞–¥/–í–ø–µ—Ä—ë–¥/–ó–∞–ø—Ä–æ—Å–∏—Ç—å¬ª.
  - –î–ª—è —Å–µ—Ä–∏–∞–ª–æ–≤ –∏–∑ `/series` ‚Äî –≤—ã–±–æ—Ä –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã—Ö —Å–µ–∑–æ–Ω–æ–≤ –ø–µ—Ä–µ–¥ –æ—Ç–ø—Ä–∞–≤–∫–æ–π –∑–∞–ø—Ä–æ—Å–∞.
  - `/requests` ‚Äî –ø—Ä–æ—Å–º–æ—Ç—Ä —Å—Ç–∞—Ç—É—Å–∞ –≤—Å–µ—Ö —Å–≤–æ–∏—Ö –∑–∞–ø—Ä–æ—Å–æ–≤.
- **–£–º–Ω–æ–µ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ:** —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–æ–∏—Å–∫–∞ –∏ ¬´discover¬ª –∫—ç—à–∏—Ä—É—é—Ç—Å—è –Ω–∞ 1 —á–∞—Å –¥–ª—è —É–º–µ–Ω—å—à–µ–Ω–∏—è –Ω–∞–≥—Ä—É–∑–∫–∏ –Ω–∞ API –∏ —É—Å–∫–æ—Ä–µ–Ω–∏—è —Ä–∞–±–æ—Ç—ã.

---

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

1. **Telegram‚Äë–±–æ—Ç** ‚Äî —Ç–æ–∫–µ–Ω –æ—Ç [@BotFather](https://t.me/botfather).  
2. **Telegram API ID –∏ API Hash** ‚Äî –±–µ—Ä—É—Ç—Å—è –Ω–∞ [https://my.telegram.org](https://my.telegram.org).  
3. **–°–µ—Ä–≤–µ—Ä Jellyfin** ‚Äî URL –∏ API‚Äë–∫–ª—é—á (Dashboard ‚Üí API Keys).  
4. **–°–µ—Ä–≤–µ—Ä Jellyseerr** ‚Äî URL –∏ API‚Äë–∫–ª—é—á (Settings ‚Üí General).  
5. **TMDB API Key** ‚Äî –±–µ—Ä—ë—Ç—Å—è –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö –∞–∫–∫–∞—É–Ω—Ç–∞ –Ω–∞ TheMovieDB. [web:2]  
6. **TheTVDB v4 API Key** ‚Äî –æ—Ñ–æ—Ä–º–ª—è–µ—Ç—Å—è –≤ –ª–∏—á–Ω–æ–º –∫–∞–±–∏–Ω–µ—Ç–µ TheTVDB. [web:7]  
7. Python 3.11+ (–¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ –∑–∞–ø—É—Å–∫–∞) –∏–ª–∏ Docker (–¥–ª—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞).

---

## ‚öôÔ∏è –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ (–ª–æ–∫–∞–ª—å–Ω–æ, —á–µ—Ä–µ–∑ Python)

1. **–ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π:**
    ```
    git clone https://github.com/your-username/TellySeerr.git
    cd TellySeerr
    ```

2. **–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ (—á–µ—Ä–µ–∑ Pipenv):**
    ```
    pipenv install
    ```

3. **–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `.env` –Ω–∞ –æ—Å–Ω–æ–≤–µ –ø—Ä–∏–º–µ—Ä–∞:**
    ```
    cp .env.sample .env
    ```

4. **–ó–∞–ø–æ–ª–Ω–∏—Ç–µ `.env` (–±–µ–∑ –∫–∞–≤—ã—á–µ–∫):**
    ```
    TELEGRAM_API_ID=1234567
    TELEGRAM_API_HASH=your_api_hash_here
    TELEGRAM_BOT_TOKEN=your_bot_token_here

    JELLYSEERR_URL=https://jellyseerr.example.com
    JELLYSEERR_API_KEY=your_jellyseerr_api_key_here

    JELLYFIN_URL=https://jellyfin.example.com
    JELLYFIN_API_KEY=your_jellyfin_api_key_here

    TMDB_API_KEY=your_tmdb_api_key_here
    TVDB_API_KEY=your_thetvdb_v4_api_key_here

    ADMIN_USER_IDS=
    DB_PATH=jellyseerr_bot.db
    ```

5. **–ó–∞–ø—É—Å—Ç–∏—Ç–µ –±–æ—Ç–∞:**
    ```
    pipenv run python main.py
    ```

–ë–æ—Ç –ø–æ–¥–∫–ª—é—á–∏—Ç—Å—è –∫ Telegram, —É—Å—Ç–∞–Ω–æ–≤–∏—Ç –∫–æ–º–∞–Ω–¥—ã, –ø—Ä–æ–∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö –∏ –∑–∞–ø—É—Å—Ç–∏—Ç —Ñ–æ–Ω–æ–≤—É—é –∑–∞–¥–∞—á—É –æ—á–∏—Å—Ç–∫–∏ –ø—Ä–æ—Å—Ä–æ—á–µ–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π.

---

## üê≥ –ó–∞–ø—É—Å–∫ —á–µ—Ä–µ–∑ Docker

1. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ `.env` –ª–µ–∂–∏—Ç —Ä—è–¥–æ–º —Å `docker-compose.yml` –∏ –∑–∞–ø–æ–ª–Ω–µ–Ω.  

2. –°–æ–±–µ—Ä–∏—Ç–µ –∏ –∑–∞–ø—É—Å—Ç–∏—Ç–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä:
    ```
    docker compose build
    docker compose up -d
    ```

3. –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –±–æ—Ç–∞ (`jellyseerr_bot.db`) –±—É–¥–µ—Ç —Ö—Ä–∞–Ω–∏—Ç—å—Å—è –≤ Docker volume `tellyseerr_data`.

---

## ü§ñ –ö–æ–º–∞–Ω–¥—ã –±–æ—Ç–∞

### –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –∫–æ–º–∞–Ω–¥—ã

| –ö–æ–º–∞–Ω–¥–∞     | –û–ø–∏—Å–∞–Ω–∏–µ |
|------------|----------|
| `/start`   | –ó–∞–ø—É—Å—Ç–∏—Ç—å –±–æ—Ç–∞ –∏ –ø–æ–ª—É—á–∏—Ç—å –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ |
| `/help`    | –ü–æ–∫–∞–∑–∞—Ç—å —Å–ø–∏—Å–æ–∫ –∫–æ–º–∞–Ω–¥ –∏ –ø–æ–¥—Å–∫–∞–∑–∫–∏ |
| `/request` | –ü–æ–∏—Å–∫ —Ñ–∏–ª—å–º–∞/—Å–µ—Ä–∏–∞–ª–∞: `/request <–Ω–∞–∑–≤–∞–Ω–∏–µ>` |
| `/series`  | –ü–æ–∏—Å–∫ —Å–µ—Ä–∏–∞–ª–∞ –ø–æ —Ä—É—Å—Å–∫–æ–º—É –Ω–∞–∑–≤–∞–Ω–∏—é (TheTVDB + –≤—ã–±–æ—Ä —Å–µ–∑–æ–Ω–æ–≤) |
| `/discover`| –ü–æ–ø—É–ª—è—Ä–Ω—ã–µ –∏ —Ç—Ä–µ–Ω–¥–æ–≤—ã–µ —Ñ–∏–ª—å–º—ã/—Å–µ—Ä–∏–∞–ª—ã |
| `/requests`| –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å —Å–≤–æ–∏ –∑–∞–ø—Ä–æ—Å—ã –∏ –∏—Ö —Å—Ç–∞—Ç—É—Å |
| `/watch`   | –õ–∏—á–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø—Ä–æ—Å–º–æ—Ç—Ä–æ–≤ –∏–∑ Jellyfin |
| `/link`    | –ü—Ä–∏–≤—è–∑–∞—Ç—å –∞–∫–∫–∞—É–Ω—Ç: `/link <–ª–æ–≥–∏–Ω> <–ø–∞—Ä–æ–ª—å>` |
| `/unlink`  | –û—Ç–≤—è–∑–∞—Ç—å –∞–∫–∫–∞—É–Ω—Ç |

### –ö–æ–º–∞–Ω–¥—ã —Ç–æ–ª—å–∫–æ –¥–ª—è –∞–¥–º–∏–Ω–æ–≤

| –ö–æ–º–∞–Ω–¥–∞        | –û–ø–∏—Å–∞–Ω–∏–µ |
|----------------|----------|
| `/invite`      | –û—Ç–≤–µ—Ç—å—Ç–µ –Ω–∞ —Å–æ–æ–±—â–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, —á—Ç–æ–±—ã —Å–æ–∑–¥–∞—Ç—å –ø–æ—Å—Ç–æ—è–Ω–Ω—ã–π –∞–∫–∫–∞—É–Ω—Ç |
| `/trial`       | –û—Ç–≤–µ—Ç—å—Ç–µ –Ω–∞ —Å–æ–æ–±—â–µ–Ω–∏–µ, —á—Ç–æ–±—ã –≤—ã–¥–∞—Ç—å —Ç–µ—Å—Ç–æ–≤—ã–π –¥–æ—Å—Ç—É–ø –Ω–∞ 7 –¥–Ω–µ–π |
| `/vip`         | –û—Ç–≤–µ—Ç—å—Ç–µ –Ω–∞ —Å–æ–æ–±—â–µ–Ω–∏–µ, —á—Ç–æ–±—ã –≤—ã–¥–∞—Ç—å VIP‚Äë–¥–æ—Å—Ç—É–ø –Ω–∞ 30 –¥–Ω–µ–π |
| `/deleteuser`  | –£–¥–∞–ª–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è: `/deleteuser <username>` |
| `/listusers`   | –ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —Å–µ—Ä–≤–µ—Ä–∞ Jellyfin |

---

## ü§ù –í–∫–ª–∞–¥ –∏ –¥–æ—Ä–∞–±–æ—Ç–∫–∞

- –ú–æ–∂–Ω–æ —Å–æ–æ–±—â–∞—Ç—å –æ–± –æ—à–∏–±–∫–∞—Ö –∏ –ø—Ä–µ–¥–ª–∞–≥–∞—Ç—å —Ñ–∏—á–∏ —á–µ—Ä–µ–∑ Issues –≤ GitHub.  
- –î–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏:
  - –§–æ—Ä–∫–Ω—É—Ç—å —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π.
  - –ù–∞—Å—Ç—Ä–æ–∏—Ç—å `.env`.
  - –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å `pipenv`, `ruff`, `pre-commit` (—Å–º. `CONTRIBUTING.md`).
  - –î–æ–±–∞–≤–ª—è—Ç—å –Ω–æ–≤—ã–µ —Ö–µ–Ω–¥–ª–µ—Ä—ã –≤ `bot/handlers/` ‚Äî –∑–∞–≥—Ä—É–∑—á–∏–∫ –ø–æ–¥–∫–ª—é—á–∏—Ç –∏—Ö –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏.

---

## üìú –õ–∏—Ü–µ–Ω–∑–∏—è

–ü—Ä–æ–µ–∫—Ç —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω—è–µ—Ç—Å—è –ø–æ –ª–∏—Ü–µ–Ω–∑–∏–∏ MIT. –ü–æ–ª–Ω—ã–π —Ç–µ–∫—Å—Ç ‚Äî –≤ —Ñ–∞–π–ª–µ `LICENSE`.
